window.quizQuestions = [
    {
        question: "Hola, Julio. ¬øC√≥mo _____ esta ma√±ana?",
        options: [
            "te sentir√≠as",
            "te encuentras",
            "saldr√≠an",
            "contar√≠a"
        ],
        correct: 1
    },
    {
        question: "¬øQu√© _______ para la cena de ma√±ana?",
        options: [
            "cocin√©",
            "cocinaba",
            "cocinar√©",
            "hab√≠a cocinado"
        ],
        correct: 2
    },
    {
        question: "Los estudiantes siempre quieren ir _______",
        options: [
            "en el √°rbol.",
            "sin alegr√≠a.",
            "al parque.",
            "con el cansancio."
        ],
        correct: 2
    },
    {
        question: "¬øQu√© funci√≥n cumple 'con cari√±o' en 'Escribi√≥ la carta con cari√±o'?",
        options: [
            "Sujeto",
            "Complemento directo",
            "Complemento circunstancial",
            "Predicado"
        ],
        correct: 2
    },
    {
        question: "¬øCu√°l es el modo verbal en 'Ojal√° llueva ma√±ana'?",
        options: [
            "Indicativo",
            "Subjuntivo",
            "Imperativo",
            "Condicional"
        ],
        correct: 1
    },
    {
        question: "Observa la imagen de la ni√±a bailando. ¬øQu√© oraci√≥n describe mejor la escena?",
        image: "img/quiz/dance.png",
        options: [
            "La ni√±a est√° saltando en la sala",
            "La ni√±a est√° practicando sus pasos de baile en la sala",
            "La ni√±a est√° haciendo ejercicio",
            "La ni√±a est√° jugando en la sala"
        ],
        correct: 1,
        category: "descripci√≥n_acciones"
    },
    {
        question: "La chica con la c√°mara est√° sonriendo. ¬øQu√© expresi√≥n usar√≠as para describir su estado de √°nimo?",
        image: "img/quiz/camera.jpg",
        options: [
            "Est√° que no cabe en s√≠ de gozo",
            "Est√° como pez en el agua",
            "Est√° que se sube por las paredes",
            "Est√° que echa chispas"
        ],
        correct: 0,
        category: "expresiones_idiom√°ticas"
    },
    {
        question: "En el aeropuerto, ¬øqu√© situaci√≥n refleja la imagen?",
        image: "img/quiz/airport.png",
        options: [
            "El pasajero est√° haciendo el check-in",
            "La azafata est√° dando indicaciones sobre la puerta de embarque",
            "El hombre est√° comprando un billete",
            "Est√°n revisando la documentaci√≥n"
        ],
        correct: 1,
        category: "situaciones_cotidianas"
    },
    {
        question: "En el pueblo andino, los turistas probablemente est√°n...",
        image: "img/quiz/tourists.png",
        options: [
            "Preguntando por direcciones al centro",
            "Regateando el precio de las artesan√≠as",
            "Pidiendo recomendaciones de restaurantes",
            "Consultando sobre el clima local"
        ],
        correct: 1,
        category: "interacci√≥n_cultural"
    },
    {
        question: "En el tren, ¬øqu√© detalle NO corresponde con la imagen?",
        image: "img/quiz/train.png",
        options: [
            "Hay tres pasajeros en el vag√≥n",
            "Dos personas est√°n despiertas",
            "Uno de los pasajeros tiene un brazo enyesado",
            "Un pasajero est√° leyendo"
        ],
        correct: 1,
        category: "comprensi√≥n_detalles"
    },
    {
        question: "Sobre la imagen del gato, elige la descripci√≥n que utiliza correctamente los marcadores espaciales:",
        image: "img/quiz/cat.png",
        options: [
            "El gato est√° acostado sobre la alfombra, entre la cama y el escritorio, mientras las l√°mparas iluminan el cuarto",
            "El gato est√° en la alfombra, la cama est√° al lado del escritorio y hay l√°mparas",
            "En el cuarto hay un gato, tambi√©n hay una cama y un escritorio con l√°mparas",
            "Las l√°mparas iluminan al gato que est√° en la alfombra cerca de la cama y el escritorio"
        ],
        correct: 0,
        category: "uso_preposiciones"
    },
    {
        question: "Selecciona la forma verbal correcta: 'Si yo _______ m√°s tiempo, estudiar√≠a otro idioma.'",
        options: [
            "tendr√≠a",
            "tuviera",
            "ten√≠a",
            "tenga"
        ],
        correct: 1,
        category: "subjuntivo_condicional"
    },
    {
        question: "Elige la preposici√≥n correcta: 'Mar√≠a se dedica _____ ense√±ar espa√±ol _____ extranjeros _____ hace cinco a√±os.'",
        options: [
            "a / a / desde",
            "en / para / hace",
            "de / a / desde",
            "por / para / desde"
        ],
        correct: 0,
        category: "uso_preposiciones"
    },
    {
        question: "¬øQu√© tiempo verbal es correcto? 'Cuando _______ a casa, me llam√≥ mi hermana.'",
        options: [
            "llegu√©",
            "he llegado",
            "llegaba",
            "hab√≠a llegado"
        ],
        correct: 0,
        category: "tiempos_pasado"
    },
    {
        question: "Selecciona el adverbio adecuado: 'El tren lleg√≥ _______ a la estaci√≥n porque hubo un problema t√©cnico.'",
        options: [
            "tarde",
            "tardes",
            "tardemente",
            "tard√≠o"
        ],
        correct: 0,
        category: "uso_adverbios"
    },
    {
        question: "Completa con el verbo en subjuntivo: 'Es necesario que _______ (t√∫) el formulario antes de viajar.'",
        options: [
            "rellenas",
            "rellenar√°s",
            "rellenes",
            "rellenaste"
        ],
        correct: 2,
        category: "subjuntivo_presente"
    },
    {
        question: "Elige la expresi√≥n temporal correcta: '_______ que empec√© a aprender espa√±ol, he hecho muchos amigos.'",
        options: [
            "Desde",
            "Hace",
            "Durante",
            "Mientras"
        ],
        correct: 0,
        category: "expresiones_temporales"
    },
    {
        question: "Lee el siguiente di√°logo y elige la opci√≥n que completa la conversaci√≥n:\n- ¬øTe importar√≠a prestarme tus apuntes?\n- _______",
        options: [
            "No, para nada. Te los traigo ma√±ana",
            "S√≠, me importa mucho",
            "No me importa nada",
            "S√≠, tr√°elos ma√±ana"
        ],
        correct: 0,
        category: "cortes√≠a_pragm√°tica"
    },
    {
        question: "¬øQu√© pronombre relativo completa correctamente la frase? 'La ciudad _____ vivo tiene un clima muy agradable.'",
        options: [
            "que",
            "donde",
            "cual",
            "quien"
        ],
        correct: 1,
        category: "pronombres_relativos"
    },
    {
        question: "Identifica el conector adecuado: 'No pude llegar temprano _______ hab√≠a mucho tr√°fico.'",
        options: [
            "porque",
            "pero",
            "sino",
            "aunque"
        ],
        correct: 0,
        category: "conectores_discursivos"
    },
    {
        question: "Selecciona la per√≠frasis verbal correcta: 'Mi hermana _______ estudiar medicina el pr√≥ximo a√±o.'",
        options: [
            "va a",
            "est√° a",
            "viene de",
            "sigue de"
        ],
        correct: 0,
        category: "per√≠frasis_verbales"
    },
    {
        question: "¬øQu√© opci√≥n expresa mejor probabilidad en presente? 'Son las 10 y Juan no ha llegado, _______.'",
        options: [
            "estar√° enfermo",
            "est√° enfermo",
            "estuvo enfermo",
            "ha estado enfermo"
        ],
        correct: 0,
        category: "expresi√≥n_probabilidad"
    },
    {
        question: "Completa con el modo correcto: 'Te sugiero que _______ (ir) al m√©dico.'",
        options: [
            "vas",
            "vayas",
            "ir√°s",
            "fuiste"
        ],
        correct: 1,
        category: "subjuntivo_sugerencia"
    },
    {
        question: "Escucha el audio y selecciona la opci√≥n que mejor describe la situaci√≥n:",
        audio: "audio/quiz/beisbol-cuba.mp3",
        audioText: "Transcripci√≥n del audio (oculta hasta completar el ejercicio)",
        options: [
            "Una reserva en un restaurante",
            "Una cita m√©dica",
            "Una compra de entradas",
            "Una consulta de horarios"
        ],
        correct: 0,
        category: "comprensi√≥n_auditiva"
    },
    {
        question: "¬øQu√© emoci√≥n expresa principalmente la persona que habla?",
        audio: "audio/quiz/beisbol-cuba.mp3",
        audioText: "Transcripci√≥n del audio (oculta)",
        options: [
            "Entusiasmo",
            "Preocupaci√≥n",
            "Indiferencia",
            "Sorpresa"
        ],
        correct: 1,
        category: "comprensi√≥n_emocional"
    },
    {
        question: "Escucha el audio y responde: ¬øD√≥nde se celebran los carnavales m√°s espectaculares seg√∫n el hablante?",
        audio: "audio/quiz/carnaval_espana.mp3",
        audioText: "En Espa√±a se celebra mucho el carnaval, hay muchos carnavales y, bueno, los m√°s espectaculares con diferencias son los de Tenerife y Gran Canaria, hay mucha fiesta en la calle, hace mucho calor, se preparan mucho los desfiles, los trajes.",
        options: [
            "Madrid y Barcelona",
            "Tenerife y Gran Canaria",
            "Sevilla y Valencia",
            "C√°diz y M√°laga"
        ],
        correct: 1,
        category: "comprensi√≥n_auditiva"
    },
    {
        question: "Seg√∫n el audio, ¬øqu√© caracteriza a estos carnavales?",
        audio: "audio/quiz/carnaval_espana.mp3",
        audioText: "En Espa√±a se celebra mucho el carnaval, hay muchos carnavales y, bueno, los m√°s espectaculares con diferencias son los de Tenerife y Gran Canaria, hay mucha fiesta en la calle, hace mucho calor, se preparan mucho los desfiles, los trajes.",
        options: [
            "Son muy tranquilos y familiares",
            "Tienen mucha fiesta en la calle y elaborados desfiles",
            "Son principalmente religiosos",
            "Se celebran en invierno con mucho fr√≠o"
        ],
        correct: 1,
        category: "inferencia_contextual"
    },
    {
        question: "¬øQu√© palabra se repite m√°s en el audio?",
        audio: "audio/quiz/carnaval_espana.mp3",
        audioText: "En Espa√±a se celebra mucho el carnaval, hay muchos carnavales y, bueno, los m√°s espectaculares con diferencias son los de Tenerife y Gran Canaria, hay mucha fiesta en la calle, hace mucho calor, se preparan mucho los desfiles, los trajes.",
        options: [
            "Espa√±a",
            "Carnaval",
            "Mucho",
            "Fiesta"
        ],
        correct: 2,
        category: "atenci√≥n_detalle"
    },
    {
        question: "Escucha el audio y responde: ¬øD√≥nde se encuentra el glaciar Perito Moreno?",
        audio: "audio/quiz/argentina_glaciar.mp3",
        audioText: "En el sur de Argentina hace mucho fr√≠o por su proximidad con la con la Ant√°rtida, all√≠ se encuentra el glaciar perito moreno, que es una gran extensi√≥n de hielo, atrae mucho turismo y es uno de los espect√°culos naturales m√°s grandes que hay en este planeta.",
        options: [
            "En el norte de Argentina",
            "En el sur de Argentina",
            "En la Ant√°rtida",
            "En Chile"
        ],
        correct: 1,
        category: "comprensi√≥n_auditiva"
    },
    {
        question: "Seg√∫n el audio, ¬øpor qu√© hace mucho fr√≠o en el sur de Argentina?",
        audio: "audio/quiz/argentina_glaciar.mp3",
        audioText: "En el sur de Argentina hace mucho fr√≠o por su proximidad con la con la Ant√°rtida, all√≠ se encuentra el glaciar perito moreno, que es una gran extensi√≥n de hielo, atrae mucho turismo y es uno de los espect√°culos naturales m√°s grandes que hay en este planeta.",
        options: [
            "Por la altitud de las monta√±as",
            "Por su proximidad con la Ant√°rtida",
            "Por las corrientes marinas",
            "Por el cambio clim√°tico"
        ],
        correct: 1,
        category: "relaci√≥n_causa_efecto"
    },
    {
        question: "¬øQu√© error gramatical se comete en el audio?",
        audio: "audio/quiz/argentina_glaciar.mp3",
        audioText: "En el sur de Argentina hace mucho fr√≠o por su proximidad con la con la Ant√°rtida, all√≠ se encuentra el glaciar perito moreno, que es una gran extensi√≥n de hielo, atrae mucho turismo y es uno de los espect√°culos naturales m√°s grandes que hay en este planeta.",
        options: [
            "Repetici√≥n de 'con la'",
            "Falta de art√≠culo antes de 'Argentina'",
            "Uso incorrecto de 'all√≠'",
            "Falta de may√∫scula en 'perito moreno'"
        ],
        correct: 0,
        category: "an√°lisis_gramatical"
    }
]; 

// Funci√≥n √∫nica para verificar y corregir rutas de recursos (im√°genes/audio)
function verifyAndFixResources() {
    if (!window.quizQuestions) return;
    
    console.log("üîÑ Verificando recursos de preguntas...");
    
    window.quizQuestions.forEach((question, index) => {
        // Procesar im√°genes
        if (question.image) {
            // Normalizar ruta de imagen
            if (!question.image.startsWith('img/quiz/')) {
                const fileName = question.image.split('/').pop();
                question.image = `img/quiz/${fileName}`;
                console.log(`üñºÔ∏è Corrigiendo ruta de imagen en pregunta ${index+1}: ${question.image}`);
            }
            
            // Verificar si la imagen existe
            const img = new Image();
            img.onerror = () => {
                console.warn(`‚ö†Ô∏è Imagen no encontrada: ${question.image}, usando respaldo`);
                question.originalImage = question.image; // Guardar la original por si acaso
                question.image = 'img/quiz/placeholder.jpg';
            };
            img.src = question.image;
        }
        
        // Procesar audio
        if (question.audio) {
            // Normalizar ruta de audio
            if (!question.audio.startsWith('audio/quiz/')) {
                const fileName = question.audio.split('/').pop();
                question.audio = `audio/quiz/${fileName}`;
                console.log(`üîä Corrigiendo ruta de audio en pregunta ${index+1}: ${question.audio}`);
            }
            
            // No podemos verificar f√°cilmente si el audio existe como con las im√°genes
            // Pero podemos preparar un plan de respaldo para el reproductor
        }
    });
    
    // Modificar el m√©todo que muestra im√°genes para usar respaldo si falla
    if (window.Quiz && window.Quiz.prototype) {
    window.Quiz.prototype.createImageContainer = function(question) {
        if (!question.image) return '';
        
        return `
            <div class="image-container mb-4 text-center">
                <img src="${question.image}" 
                     alt="Imagen para pregunta ${this.currentQuestion + 1}"
                     class="img-fluid rounded"
                     style="max-height: 300px;"
                     onerror="this.onerror=null; this.src='img/quiz/placeholder.jpg'; 
                             this.parentNode.innerHTML += '<p class=\\'text-danger mt-2\\'>Imagen no disponible</p>';">
            </div>
        `;
    };
    
        // Tambi√©n modificar el m√©todo que maneja los audios para incluir respaldo
        const originalCreateAudioElement = window.Quiz.prototype.createAudioElement;
        window.Quiz.prototype.createAudioElement = function(question) {
            if (!question.audio) return '';
            
            return `
                <div class="audio-container mb-4">
                    <audio controls class="w-100" onError="this.outerHTML='<div class=\\'alert alert-warning\\'>Audio no disponible</div>'">
                        <source src="${question.audio}" type="audio/mpeg">
                        Tu navegador no soporta el elemento de audio.
                    </audio>
                </div>
            `;
        };
    }
    
    console.log("‚úÖ Verificaci√≥n de recursos completada");
}

// Ejecutar una sola vez cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(verifyAndFixResources, 500); // Un peque√±o retraso para asegurar que todo est√° cargado
}); 